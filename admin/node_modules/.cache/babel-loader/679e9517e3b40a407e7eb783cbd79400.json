{"ast":null,"code":"var _jsxFileName = \"D:\\\\Tanot\\\\admin\\\\src\\\\Core\\\\Category Pages\\\\EditCategory.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Card, Col, Form, Row } from \"react-bootstrap\";\nimport Sidebar from \"../../Components/Sidebar\";\nimport axios from \"axios\";\nimport \"./AddCategory.css\";\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditCategory(props) {\n  _s();\n  const [categoryData, setCategoryData] = useState({\n    name: \"\"\n  });\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setCategoryData(prev => {\n      return {\n        ...prev,\n        [name]: value\n      };\n    });\n  };\n  useEffect(() => {\n    getCategoryData();\n  }, []);\n  const getCategoryData = () => {\n    const categoryId = props.match.params.categoryId;\n    axios({\n      method: \"get\",\n      url: `https://ecommerceappcj.herokuapp.com/api/categories/${categoryId}`\n    }).then(response => {\n      console.log(response.data.category);\n      setCategoryData(response.data.category);\n      setImagePreview(`https://ecommerceappcj.herokuapp.com/${response.data.category.image}`);\n    });\n  };\n  const [imagePreview, setImagePreview] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const imageButtonRef = useRef();\n  const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n  const history = useHistory();\n  function handleImageChange(event) {\n    let selectedFile = event.target.files[0];\n    if (selectedFile && types.includes(selectedFile.type)) {\n      setImage(selectedFile);\n      setImagePreview(URL.createObjectURL(selectedFile));\n    } else {\n      setImage(null);\n    }\n  }\n  const editCategory = async event => {\n    event.preventDefault();\n    try {\n      axios({\n        method: \"patch\",\n        url: `https://ecommerceappcj.herokuapp.com/api/categories/${props.match.params.categoryId}`,\n        data: {\n          name: categoryData.name\n        }\n      }).then(response => {\n        if (image) {\n          const formData = new FormData();\n          formData.append(\"image\", image);\n          axios({\n            method: \"patch\",\n            url: `https://ecommerceappcj.herokuapp.com/api/categories/image/${props.match.params.categoryId}`,\n            data: formData\n          }).then(resp => {\n            setImagePreview();\n            setCategoryData({\n              name: \"\"\n            });\n            history.push(\"/categories\");\n          });\n        } else {\n          setImagePreview();\n          setCategoryData({\n            name: \"\"\n          });\n          history.push(\"/categories\");\n        }\n      });\n    } catch (err) {\n      console.log(\"Error : \" + err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-parent-div\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        lg: 2,\n        children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"add-category-content\",\n        lg: 10,\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Edit Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please fill the category details in the form below to edit category information.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"add-product-form-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"add-product-input-div\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Category Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              value: categoryData.name,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"add-category-image-div\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                imageButtonRef.current.click();\n              },\n              className: \"category-image-div\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                ref: imageButtonRef,\n                style: {\n                  display: \"none\"\n                },\n                type: \"file\",\n                name: \"image\",\n                accept: \"image/*\",\n                onChange: handleImageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), imagePreview ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: imagePreview,\n                alt: \"preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Add category image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: editCategory,\n            className: \"add-category-btn\",\n            children: \"Update Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(EditCategory, \"ucDhiMPdKHC1KM21sNYZ31jCehI=\", false, function () {\n  return [useHistory];\n});\n_c = EditCategory;\nexport default EditCategory;\nvar _c;\n$RefreshReg$(_c, \"EditCategory\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Card","Col","Form","Row","Sidebar","axios","useHistory","jsxDEV","_jsxDEV","EditCategory","props","_s","categoryData","setCategoryData","name","handleChange","event","value","target","prev","getCategoryData","categoryId","match","params","method","url","then","response","console","log","data","category","setImagePreview","image","imagePreview","setImage","imageButtonRef","types","history","handleImageChange","selectedFile","files","includes","type","URL","createObjectURL","editCategory","preventDefault","formData","FormData","append","resp","push","err","message","className","children","lg","fileName","_jsxFileName","lineNumber","columnNumber","onChange","onClick","current","click","Control","ref","style","display","accept","src","alt","_c","$RefreshReg$"],"sources":["D:/Tanot/admin/src/Core/Category Pages/EditCategory.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Card, Col, Form, Row } from \"react-bootstrap\";\nimport Sidebar from \"../../Components/Sidebar\";\nimport axios from \"axios\";\n\nimport \"./AddCategory.css\";\nimport { useHistory } from \"react-router\";\n\nfunction EditCategory(props) {\n  const [categoryData, setCategoryData] = useState({\n    name: \"\",\n  });\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setCategoryData((prev) => {\n      return { ...prev, [name]: value };\n    });\n  };\n\n  useEffect(() => {\n    getCategoryData();\n  }, []);\n\n  const getCategoryData = () => {\n    const categoryId = props.match.params.categoryId;\n    axios({\n      method: \"get\",\n      url: `https://ecommerceappcj.herokuapp.com/api/categories/${categoryId}`,\n    }).then((response) => {\n      console.log(response.data.category);\n      setCategoryData(response.data.category);\n      setImagePreview(\n        `https://ecommerceappcj.herokuapp.com/${response.data.category.image}`\n      );\n    });\n  };\n\n  const [imagePreview, setImagePreview] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const imageButtonRef = useRef();\n  const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n  const history = useHistory();\n\n  function handleImageChange(event) {\n    let selectedFile = event.target.files[0];\n    if (selectedFile && types.includes(selectedFile.type)) {\n      setImage(selectedFile);\n      setImagePreview(URL.createObjectURL(selectedFile));\n    } else {\n      setImage(null);\n    }\n  }\n\n  const editCategory = async (event) => {\n    event.preventDefault();\n    try {\n      axios({\n        method: \"patch\",\n        url: `https://ecommerceappcj.herokuapp.com/api/categories/${props.match.params.categoryId}`,\n        data: { name: categoryData.name },\n      }).then((response) => {\n        if (image) {\n          const formData = new FormData();\n          formData.append(\"image\", image);\n          axios({\n            method: \"patch\",\n            url: `https://ecommerceappcj.herokuapp.com/api/categories/image/${props.match.params.categoryId}`,\n            data: formData,\n          }).then((resp) => {\n            setImagePreview();\n            setCategoryData({\n              name: \"\",\n            });\n            history.push(\"/categories\");\n          });\n        } else {\n          setImagePreview();\n          setCategoryData({\n            name: \"\",\n          });\n          history.push(\"/categories\");\n        }\n      });\n    } catch (err) {\n      console.log(\"Error : \" + err.message);\n    }\n  };\n  return (\n    <div className=\"dashboard-parent-div\">\n      <Row>\n        <Col lg={2}>\n          <Sidebar />\n        </Col>\n        <Col className=\"add-category-content\" lg={10}>\n          <h4>Edit Category</h4>\n          <p>\n            Please fill the category details in the form below to edit category\n            information.\n          </p>\n          <Card className=\"add-product-form-card\">\n            <div className=\"add-product-input-div\">\n              <p>Category Name</p>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={categoryData.name}\n                onChange={handleChange}\n              ></input>\n            </div>\n            <div className=\"add-category-image-div\">\n              <div\n                onClick={() => {\n                  imageButtonRef.current.click();\n                }}\n                className=\"category-image-div\"\n              >\n                <Form.Control\n                  ref={imageButtonRef}\n                  style={{ display: \"none\" }}\n                  type=\"file\"\n                  name=\"image\"\n                  accept=\"image/*\"\n                  onChange={handleImageChange}\n                />\n                {imagePreview ? (\n                  <img src={imagePreview} alt=\"preview\" />\n                ) : (\n                  <p>Add category image</p>\n                )}\n              </div>\n            </div>\n            <button onClick={editCategory} className=\"add-category-btn\">\n              Update Category\n            </button>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nexport default EditCategory;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}